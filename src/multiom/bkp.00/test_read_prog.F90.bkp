PROGRAM test01

  !> Symbols imported from other modules within the project.
  USE :: DATAKINDS_DEF_MOD, ONLY: JPIB_K

  USE :: GRIB_SECTION_BASE_MOD,    ONLY: GRIB_SECTION_BASE_A
  USE :: GRIB_ENCODER_FACTORY_MOD, ONLY: MAKE_ENCODER
  USE :: GRIB_ENCODER_FACTORY_MOD, ONLY: DESTROY_ENCODER
  USE :: GRIB_ENCODER_FACTORY_MOD, ONLY: READ_ENCODER_TYPE

  USE :: YAML_CORE_UTILS_MOD, ONLY: YAML_CONFIGURATION_T
  USE :: YAML_CORE_UTILS_MOD, ONLY: YAML_NEW_CONFIGURATION_FROM_FILE
  USE :: YAML_CORE_UTILS_MOD, ONLY: YAML_DELETE_CONFIGURATION

  USE :: GRIB_ENCODER_OPTIONS_MOD, ONLY: GRIB_ENCODER_OPTIONS_T

  USE :: PARAMETRIZATION_MOD, ONLY: PARAMETRIZATION_T

  USE :: HOOKS_MOD, ONLY: HOOKS_T

IMPLICIT NONE

  !> Test encodr object
  CLASS(GRIB_SECTION_BASE_A), POINTER :: ENCODER => NULL()
  TYPE(HOOKS_T) :: HOOKS
  TYPE(YAML_CONFIGURATION_T) :: CONFIG
  CHARACTER(LEN=32) :: FNAME
  INTEGER(KIND=JPIB_K) :: UNIT
  INTEGER(KIND=JPIB_K) :: OFFSET
  INTEGER(KIND=JPIB_K) :: RET
  INTEGER(KIND=JPIB_K) :: ENCODER_TYPE

  TYPE(PARAMETRIZATION_T) :: PAR
  TYPE(GRIB_ENCODER_OPTIONS_T) :: OPT

  !> Set the unit and offset
  UNIT = 6
  OFFSET = 1
  FNAME = 'config.yaml'

  !> Open the configuration file
  RET = YAML_NEW_CONFIGURATION_FROM_FILE( TRIM(ADJUSTL(FNAME)), CONFIG, HOOKS )
  WRITE(UNIT,'(A,I5)') 'Config open: ', RET

  !> Create the encoder object
  RET = READ_ENCODER_TYPE( CONFIG, ENCODER_TYPE, HOOKS )
  WRITE(UNIT,'(A,I5,I5)') 'Read encoder type: ', RET, ENCODER_TYPE

  !> Create the encoder object
  RET = MAKE_ENCODER( ENCODER, ENCODER_TYPE, PAR, CONFIG, OPT, HOOKS )
  WRITE(UNIT,'(A,I5,I5)') 'Create the encoder: ', RET, ENCODER_TYPE

  !> Print the encoder object
  RET = ENCODER%PRINT( UNIT, OFFSET, HOOKS )
  WRITE(UNIT,'(A,I5)') 'Print the encoder: ', RET

  !> Destroy the encoder object
  RET = DESTROY_ENCODER( ENCODER, HOOKS )
  WRITE(UNIT,'(A,I5)') 'Destroy the encoder: ', RET

  !> Destroy the configuration object
  RET = YAML_DELETE_CONFIGURATION( CONFIG, HOOKS )
  WRITE(UNIT,'(A,I5)') 'Config close', RET

END PROGRAM test01