### test-configs

---

mpi-test-configuration :
  transport : mpi
  group : world
  plans :
    - name : atmosphere
      actions :
        - type : Select
          match : category
          categories : [model-level, pressure-level, surface-level]

        - type : Aggregation

        - type : Encode
          format : none

        - type : SingleFieldSink

    - name : ocean
      actions :
        - type : Select
          match : category
          categories : [ocean-model-level]

        - type : Aggregation

        - type : SingleFieldSink


thread-test-configuration :
  transport : thread
  plans :
    - name : output-only
      actions :
        - type : Print
          stream : debug

        - type : Sink
          sinks :
            - type : file
              append : true
              path : messages.txt

    - name : atmosphere
      actions :
        - type : Select
          match : category
          categories : [model-level, pressure-level, surface-level]

        - type : Aggregation

        - type : Encode
          format : none

        - type : SingleFieldSink


tcp-test-configuration:
  transport : tcp
  clients :
    - host : localhost
      ports : [4441, 4442, 4443, 4444, 4445]

  servers :
    - host : localhost
      ports : [7771, 7772, 7773]

  plans :
    - name : atmosphere
      actions :
        - type : Select
          match : category
          categories : [model-level, pressure-level, surface-level]

        - type : Aggregation

        - type : Encode
          format : none

        - type : SingleFieldSink


no-transport-test-configuration :
  transport : none
  parameters :
    ml : [130, 133, 135, 138, 155, 203, 246, 247, 248, 75, 76]
    pl : [60, 129, 130, 133, 135, 138, 155, 157, 203]
    # sfc : [1.228, 10.228, 11.228, 12.228, 129.128, 13.228, 131.151, 132.151, 134, 134.128, 136.128, 137.128, 139.128, 14.228, 141.128, 142.128, 143.128, 144.128, 145.128, 146.128, 147.128, 148.128, 151.128, 159.128, 164.128, 165.128, 166.128, 167.128, 168.128, 169.128, 170.128, 172.128, 175.128, 176.128, 177.128, 178.128, 179.128, 180.128, 181.128, 182.128, 183.128, 186.128, 187.128, 188.128, 189.128, 195.128, 196.128, 197.128, 198.128]

  plans :
    - name : atmosphere
      actions :
        - type : Sink
          sinks :
            - type : fdb5
              config : {}

            - type : file
              path : hammer.grib
