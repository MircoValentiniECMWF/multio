
transport : mpi
group : world
serverCount : 3
clientCount : 5

activeFields :
  - ssh
  - toce
  - sst
  - soce
  - sss
  - uoce
  - ssu
  - voce
  - ssv
  - woce
  - ssw

plans :

  - name : ocean-instant
    actions :
      - type : Select
        match : category
        categories : [ocean-model-level]

      - type : Statistics
        output_frequency: 1h
        operations:
          - instant

      - type : Aggregation

      # - type : SingleFieldSink
      #   root_path : "/scratch/ma/masd/ocean-fields/"

      - type : Encode
        format : grib
        template : unstructured.tmpl

      - type : Sink
        sinks :
          - type : fdb5
            config : {}

      #     - type : file
      #       append : true
      #       path : ocean-pipe.grib


  # - name : ocean-hourly
  #   actions :
  #     - type : Select
  #       match : field
  #       items : [sst, sss]

  #     - type : Statistics
  #       output_frequency: 1h
  #       operations:
  #         - average
  #         - minimum
  #         - maximum

  #     - type : Aggregation

  #     # - type : SingleFieldSink
  #     #   root_path : "/scratch/ma/masd/ocean-fields/"

  #     - type : Encode
  #       format : grib
  #       template : unstructured.tmpl

  #     - type : Sink
  #       sinks :
  #         - type : fdb5
  #           config : {}
